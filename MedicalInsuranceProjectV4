import math as mt
import numpy as np

# Medical Insurance Calculator V4.0:
print('''Welcome to the Medical Insurance Calculator V4.0 by Waleed H
''')
input("Press Enter to continue...")
print('''
Let's begin!
''')

# Function to estimate insurance cost:
def estimate_insurance_cost(name, age, sex, bmi, num_of_children, smoker):
    estimated_cost = round(250 * age - 128 * sex + 370 * bmi + 425 * num_of_children + 24000 * smoker - 12500, 2)
    monthly = round((estimated_cost / 12) * 1.0675, 2)
    print(f"\n{name}, your estimated medical insurance cost is £{estimated_cost} annually or £{monthly} monthly (subject to 6.75% APR)")
    return estimated_cost


# Ask user's name
name = ''
while len(name.split()) < 2:
    name = input('What is your full name? ')
    if len(name.split()) < 2:
        print('Please provide your full name.')


# Ask user's age
age = ''
while not age.isnumeric() or int(age) > 100:
    age = input('What is your age? ')
    if not age.isnumeric():
        print('Please provide your age as a whole number.')
    elif int(age) > 100:
        print('Sorry, we do not provide medical insurance for persons aged 101 or more. '
              'Please find a different insurance provider or provide an age below 101.')


# Celebrities
def same_age(age):
    celebrities = ['John Doe', 'Jane Smith']  # Change with actual celebrities
    if age < len(celebrities):
        print(f'\nNice! You are the same age as {celebrities[age]}!')


same_age(age=int(age))


# Ask user's gender
sex = ''
while sex not in ['0', '1']:
    gender = input('What gender were you assigned at birth? ')
    if gender.lower() == 'male':
        sex = '1'
    elif gender.lower() == 'female':
        sex = '0'
    else:
        print('Please answer male or female.')


# Ask user's BMI
bmi_value = ''
while not bmi_value.replace('.', '', 1).isdigit() or float(bmi_value) >= 40:
    bmi_value = input('What is your BMI? (You can calculate this on the NHS website @ https://www.nhs.uk/live-well/healthy-weight/bmi-calculator/) ')
    if not bmi_value.replace('.', '', 1).isdigit():
        print('Please provide a number.')
    elif float(bmi_value) >= 40:
        print('Sorry, we do not provide medical insurance for persons with a BMI of 40 or more. '
              'Please find a different insurance provider, try again once you have lowered your BMI or provide a BMI below 40.')


print(f'\nYour BMI is {float(bmi_value)}')


# Ask user if they smoke
smoker_status = 0
smoke = ''
while smoke.lower() not in ['yes', 'no']:
    smoke = input('Do you smoke? ')
    if smoke.lower() == 'yes':
        smoker_status = 1
        print('\nYou are a smoker.')
    elif smoke.lower() == 'no':
        print('\nYou are not a smoker.')
    else:
        print('Please answer yes or no.')
        
        
        
#Ask user if they have kids
kids = input('Do you have children?')
confirm_kids = False

while confirm_kids != True:
 
  if kids.lower() == 'no' or kids.lower() == 'yes':
    confirm_kids = True
  elif kids.lower() != 'no' or kids.lower() != 'yes':
    print('''
    Please answer yes or no.
    ''')
    kids = input('Do you have children?')
  
if kids.lower() == 'yes' :
  confirm_kids2 = False
else: 
  confirm_kids2 = True
  num_of_children = 0
  print('''
      No kids? Lucky you :)
      ''')
      
if confirm_kids2 == False:
   num_kids = input('How many?')

while confirm_kids2 != True:
    
  if num_kids not in str(list(range(999))) or num_kids == '' or ' ' in num_kids:
    print('''
  Please provide your number of children.
  ''')
    num_kids = input('How many?')
  
  else:
    confirm_kids2 = True
    num_of_children = int(num_kids)
    print('''
      You have ''' + num_kids + ''' children
      ''')

      



print('''
Thank you for providing your details. I will now calculate your estimated insurance cost.
''')

print('''
Done!
''')

input('Press Enter to see your insurance estimate...')

estimate_insurance_cost(name, age, sex, bmi = float(bmi_value), num_of_children = num_of_children, smoker = smoker_status)


# Advice// Smoker Analysis:
def analyse_smoker(smoker_status):

  if smoker_status == 1:
    print('''   To lower your cost, you should consider quitting smoking.
    ''')
  else:
    print('''   Smoking is not an issue for you.
    ''')

analyse_smoker(smoker_status)

#Advice// BMI Analysis

def analyse_bmi(bmi_value):

  if bmi_value > 30:
    print('   Your BMI is in the obese range. To lower your cost, you should significantly lower your BMI.')
  elif bmi_value >= 25 and bmi_value <= 30:
    print('   Your BMI is in the overweight range. To lower your cost, you should lower your BMI.')
  elif bmi_value >= 18.5 and bmi_value < 25:
    print('   Your BMI is in a healthy range.')
  elif bmi_value < 18.5:
    print('   Your BMI is in the underweight range. Increasing your BMI will not help lower your cost, but it will help improve your health.')
  if bmi_value >= 25: 
    req_loss = round(bmi_value - 25, 1)
    print('''
    To bring your BMI into a healthy range, you must lower your BMI by ''' + str(req_loss) + '.')
  if bmi_value < 18.5: 
    req_gain = round(18.5 - bmi_value, 1)
    print('''
    To bring your BMI into a healthy range, you must increase your BMI by ''' + str(req_gain) + '.')


analyse_bmi(float(bmi_value))